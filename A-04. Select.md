# Глава 4. SELECT

Базы данных выполняют множество функций. Конечно же, нам важны накопление и хранение информации, но какой толк, если мы не сможем этой информацией воспользоваться? Пожалуй, самым важным оператором языка SQL является SELECT. У нас уже есть первая база данных, состоящая из единственной таблицы, так что нам есть на чём потренироваться!

Следующий запрос выдаст нам всё содержимое единственной таблицы базы данных:
```
SELECT * FROM raspisanie;
```
Просто, правда? И, в общем-то, практически бесполезно, поскольку чаще всего нам нужна не вся таблица, а только сведения об отдельных объектах, которые она описывает. Синтаксис оператора SELECT в общем случае такой:

```
SELECT [ALL | DISTINCT] {список столбцов или выражений}
[FROM {список таблиц}]
[WHERE {условия выбора}]
[GROUP BY {столбцы группировки}]
[HAVING {условия на группу}]
[ORDER BY {столбцы сортировки [ASC | DESC]}]
[LIMIT {N}][OFFSET{M}];
```

Все поля, указанные в квадратных скобках, являются необязательными. Формально, мы можем ввести просто 

```
SELECT;
```
...и это будет работать!

ALL или DISTINCT - выбор одного из этих двух условий (обозначен вертикальной чертой между ними) говорит СУБД, хотим мы получить все строки (даже если они будут повторяться) или только уникальные (т.е. повторы будут убраны).

ASC или DESC обозначает направление сортировки (ASC обозначает по убыванию, DESC - по возрастанию).

LIMIT означает ограничение вывода числом строк, равным N, со сдвигом в M строк 

предикат FROM уточняет, из каких именно таблиц мы хотим получить данные; после WHERE следуют условия выбора, GROUP BY указывает, по каким столбцам должна быть выполнена группировка значений, HAVING накладывает условия на группу, ORDER BY определяет столбцы и порядок сортировки, LIMIT задаёт ограничения на вывод информации на экран (порой бывает полезно вывести небольшое количество первых или последних строк, а не всю таблицу на миллионы записей, при этом можно отбросить часть крайних строк).

Выглядит сложно, но во-первых здесь указаны все возможные элементы, из которых вы будете задействовать в отдельно взятом запросе далеко не всё, а во-вторых, этот оператор имеет широчайшие возможности по манипулированию данными на стороне сервера, что в общем случае означает высокую эффективность, гибкость и скорость выполнения вашего запроса. Перефразировав слова П. Самуэльсона, можно сказать, что научи попугая говорить всего лишь два, да что там - только одно слово - SELECT - и перед вами дипломированный программист баз данных.

В квадратных скобках указаны необязательные элементы. Вертикальная черта обозначает выбор из разделённых ей вариантов. Фигурные скобки означают один или несколько параметр (например, список таблиц может включать в себя действительно несколько таблиц, а может включать только одну. Обратите внимание на то, что в общем-то даже список таблиц не является обязательным, однако что же выведет нам такой запрос? Давайте попробуем!

```
test=> SELECT;
--
(1 row)
```

Итак, введённый запрос, состоящий только из оператора SELECT, вернул нам ответ (1 строка). Если мы добавим в базу данных несколько новых таблиц с другим количеством строк и укажем оператору на ту или иную таблицу, то он выведет количество строк в ней. Возникает вопрос - об одной строке в какой таблице идёт речь? Ответ на этот вопрос предлагаю вам найти самостоятельно. Возможно, он очень простой, и вы найдёте его в справке. Но может случиться так, что за этим, казалось бы, простым и незначительным вопросом кроется целая история - почему так, и что из этого, кто виноват и что делать... Привыкайте! Работа программиста лишь в малой степени (процентов 30-40 от всего рабочего времени) заключается в написании кода, всё остальное время - это исследования, поиск, узнавание нового, и это прекрасно! Учитесь учиться - и считайте вопрос, на который я предложил вам ответить самостоятельно, первым заданием.

Продемонстрирую вам ещё несколько вызовов команды SELECT и их результаты:

```
test=> select;
--
(1 row)

test=> select from raspisanie;
--
(2 rows)

test=> select * from raspisanie;
 id |    date    | pair_num |        fio_prep        | group_num | aud_num |           predmet           
----+------------+----------+------------------------+-----------+---------+-----------------------------
  1 | 2024-10-31 |        1 | Иванов Иван Иванович   | 111       | 25-2    | Математика (1 год обучения)
  2 | 2024-10-31 |        2 | Иванова Лидия Ивановна | 111       | 143     | Русский язык
(2 rows)
```







