# SELECT

Базы данных выполняют множество функций. С одной стороны, это накопление и хранение информации, но с другой стороны - это эффективное её извлечение из хранилища, быстрый поиск нужных данных, их выдача и обобщение. В этой главе мы рассмотрим оператор SELECT, выполняющий выборку данных из базы. У нас есть таблица raspisanie, и мы хотим посмотреть - что же там записано? Сделать это можно с помощью такого простого запроса:
```
SELECT * FROM raspisanie;
```
Просто, правда? И, в общем-то, практически бесполезно, поскольку чаще всего нам нужна не вся таблица, а только сведения об отдельных объектах, которые она описывает. Синтаксис оператора SELECT в общем случае такой:

```
SELECT [ALL | DISTINCT] {список столбцов или выражений}
[FROM {список таблиц}]
[WHERE {условия выбора}]
[GROUP BY {столбцы группировки}]
[HAVING {условия на группу}]
[ORDER BY {столбцы сортировки [ASC | DESC]}]
[LIMIT {N}][OFFSET{M}];
```
Выглядит сложно, но во-первых здесь указаны все возможные элементы, из которых вы будете задействовать в отдельно взятом запросе далеко не всё, а во-вторых, этот оператор имеет широчайшие возможности по манипулированию данными на стороне сервера, что в общем случае означает высокую эффективность, гибкость и скорость выполнения вашего запроса. Перефразировав слова П. Самуэльсона, можно сказать, что научи попугая говорить всего лишь два, да что там - только одно слово - SELECT - и перед вами дипломированный программист баз данных.

В квадратных скобках указаны необязательные элементы. Вертикальная черта обозначает выбор из разделённых ей вариантов. Фигурные скобки означают один или несколько параметр (например, список таблиц может включать в себя действительно несколько таблиц, а может включать только одну. Обратите внимание на то, что в общем-то даже список таблиц не является обязательным, однако что же выведет нам такой запрос? Давайте попробуем!

```
test=> SELECT;
--
(1 row)
```

Итак, введённый запрос, состоящий только из оператора SELECT, вернул нам ответ (1 строка). Если мы добавим в базу данных несколько новых таблиц с другим количеством строк и укажем оператору на ту или иную таблицу, то он выведет количество строк в ней. Возникает вопрос - об одной строке в какой таблице идёт речь? Ответ на этот вопрос предлагаю вам найти самостоятельно. Возможно, он очень простой, и вы найдёте его в справке. Но может случиться так, что за этим, казалось бы, простым и незначительным вопросом кроется целая история - почему так, и что из этого, кто виноват и что делать... Привыкайте! Работа программиста лишь в малой степени (процентов 30-40 от всего рабочего времени) заключается в написании кода, всё остальное время - это исследования, поиск, узнавание нового, и это прекрасно! Учитесь учиться - и считайте вопрос, на который я предложил вам ответить самостоятельно, первым заданием.

Продемонстрирую вам ещё несколько вызовов команды SELECT и их результаты:

```
test=> select from raspisanie;
--
(2 rows)

test=> select * from raspisanie;
 id |    date    | pair_num |        fio_prep        | group_num | aud_num |           predmet           
----+------------+----------+------------------------+-----------+---------+-----------------------------
  1 | 2024-10-31 |        1 | Иванов Иван Иванович   | 111       | 25-2    | Математика (1 год обучения)
  2 | 2024-10-31 |        2 | Иванова Лидия Ивановна | 111       | 143     | Русский язык
(2 rows)
```
Первый вызов выводит число строк в таблице, второй - всю таблицу.

```
test=> select predmet, pair_num, aud_num from raspisanie where date='2024-10-31' and group_num = '111';
           predmet           | pair_num | aud_num 
-----------------------------+----------+---------
 Математика (1 год обучения) |        1 | 25-2
 Русский язык                |        2 | 143
(2 rows)

```
Этот запрос выводит название предмета, номер пары и аудиторию, в которых у группы 111 на дату 31 октября 2024 года состоятся занятия. С помощью запросов select можно вывести всю информацию, содержащуюся в таблице, но в другом порядке.

Многие книги буквально посвящены одной команде SELECT. С одной стороны, это оправдано: действительно, львиную долю задач мы решаем, извлекая данные и так, и эдак. С другой стороны, кроме извлечения данных из базы у SQL есть множество не менее замечательных возможностей. Однако для того, чтобы полноценно разобрать все имеющиеся в СУБД инструменты и их возможности, нам необходимо выстроить базу данных - более сложную, чем сейчас, и содержащую больше различной информации, иначе нам будет просто не с чем работать.





