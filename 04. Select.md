# Глава 4. SELECT

Базы данных выполняют множество функций. С одной стороны, это накопление и хранение информации, но с другой стороны - это эффективное её извлечение из хранилища, быстрый поиск нужных данных, их выдача и обобщение. В этой главе мы рассмотрим оператор SELECT, выполняющий выборку данных из базы. У нас есть таблица raspisanie, и мы хотим посмотреть - что же там записано? Сделать это можно с помощью такого простого запроса:
```
SELECT * FROM raspisanie;
```
Просто, правда? И, в общем-то, практически бесполезно, поскольку чаще всего нам нужна не вся таблица, а только сведения об отдельных объектах, которые она описывает. Синтаксис оператора SELECT в общем случае такой:

```
SELECT [ALL | DISTINCT] {список столбцов или выражений}
[FROM {список таблиц}]
[WHERE {условия выбора}]
[GROUP BY {столбцы группировки}]
[HAVING {условия на группу}]
[ORDER BY {столбцы сортировки [ASC | DESC]}]
[LIMIT {N}][OFFSET{M}];
```
Выглядит сложно, но во-первых здесь указаны все возможные элементы, из которых вы будете задействовать в отдельно взятом запросе далеко не всё, а во-вторых, этот оператор имеет широчайшие возможности по манипулированию данными на стороне сервера, что в общем случае означает высокую эффективность, гибкость и скорость выполнения вашего запроса. Перефразировав слова П. Самуэльсона, можно сказать, что научи попугая говорить всего лишь два, да что там - только одно слово - SELECT - и перед вами дипломированный программист баз данных.

В квадратных скобках указаны необязательные элементы. Вертикальная черта обозначает выбор из разделённых ей вариантов. Фигурные скобки означают один или несколько параметр (например, список таблиц может включать в себя действительно несколько таблиц, а может включать только одну. Обратите внимание на то, что в общем-то даже список таблиц не является обязательным, однако что же выведет нам такой запрос? Давайте попробуем!

```
kab18-05=> SELECT;
--
(1 row)
```
Итак, введённый запрос, состоящий только из оператора SELECT, вернул нам ответ (1 строка). Не обращайте внимания на то, что поменялось приглашение к вводу (стало m40 - я поменял настройки своей СУБД). Возникает вопрос - об одной строке в какой таблице идёт речь? Если мы добавим в базу данных несколько новых таблиц с другим количеством строк и укажем оператору на ту или иную таблицу, то он выведет количество строк в ней. Ответ на этот вопрос предлагаю вам найти самостоятельно. Возможно, он очень простой, и вы найдёте его в справке. Но может случиться так, что за этим, казалось бы, простым и незначительным вопросом кроется целая история - почему так, и что из этого, кто виноват и что делать... Работа программиста лишь в малой степени (процентов 30-40 от всего рабочего времени) заключается в написании кода, всё остальное время - это исследования, поиск, узнавание нового, и это прекрасно! Учитесь учиться - и считайте вопрос, на который я предложил вам ответить самостоятельно, первым заданием.

Продемонстрирую вам ещё несколько вызовов команды SELECT и их результаты:
```
kab18-05=> select from raspisanie;
--
(0 rows)

kab18-05=> select from raspisanie1;
--
(2 rows)

kab18-05=> select from raspisanie2;
--
(2 rows)

kab18-05=> select from raspisanie3;
--
(4 rows)

kab18-05=> select * from raspisanie3;
 id |    date    | pair_num |        fio_prep        | group_num | aud_num |           predmet           
----+------------+----------+------------------------+-----------+---------+-----------------------------
  1 | 2024-10-31 |        1 | Иванов Иван Иванович   | 111       | 25-2    | Математика (1 год обучения)
  2 | 2024-10-31 |        2 | Иванова Лидия Ивановна | 111       | 143     | Русский язык
  3 | 2024-10-31 |        1 | Иванов Иван Иванович   | 111       | 25-2    | Математика (1 год обучения)
  4 | 2024-10-31 |        2 | Иванова Лидия Ивановна | 111       | 143     | Русский язык
(4 rows)
```
Кстати, обратите внимание на повторы, которые имеются в таблице raspisanie3 - сам по себе движок СУБД не отслеживает подобные дубли, если только не сказать ему, что значение поля или набора полей должно быть уникальным для каждой записи, однако мы этот вопрос ещё рассмотрим.






